---
import Base from './Base.astro';
import Header from '@/components/common/header.astro';
import Footer from '@/components/common/footer.astro';
import type { PageLayoutProps } from './types';
import { maxWidthClasses } from './types';
import type { Lang } from '@/i18n';

interface Props extends PageLayoutProps {}

const {
  title,
  description,
  image,
  canonical,
  noindex,
  type,
  maxWidth = 'lg',
  noPadding = false,
} = Astro.props;

// Get current language for header
const currentLang = (Astro.currentLocale ?? 'en') as Lang;

// Build class list, filtering empty strings to avoid trailing spaces
const containerClass = maxWidthClasses[maxWidth];
const paddingClass = noPadding ? '' : 'px-4 md:px-6 lg:px-8';
const mainClasses = ['mx-auto', containerClass, paddingClass].filter(Boolean).join(' ');
---

<Base
  title={title}
  description={description}
  image={image}
  canonical={canonical}
  noindex={noindex}
  type={type}
>
  <!-- Main Site Header -->
  <Header lang={currentLang} />

  <!-- Main Content Area -->
  <main id="main-content" class={mainClasses}>
    <slot />
  </main>

  <!-- Footer -->
  <Footer lang={currentLang} />

  <!-- Footer Slot (for page-specific footer content) -->
  <slot name="footer" />
</Base>
